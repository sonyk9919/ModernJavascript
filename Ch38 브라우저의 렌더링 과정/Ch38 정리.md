# 브라우저의 렌더링 과정

1. 브라우저가 Html, CSS, javascript 리소스를 서버에 요청하고 응답을 받는다.
2. Html, CSS를 각각 파싱하여 DOM, CSSOM을 생성하고 이를 결합하여 Render Tree를 생성한다.
3. 자바 스크립트 엔진은 자바 스크립트를 파싱하여 Abstract Syntax Tree를 생성하고 바이트코드로 변환하여 실행한다. 이때 자바스크립트는 DOM API를 이용해 DOM또는 CSSOM을 변경할 수 있다. 변경된 DOM, CSSOM은 다시 Render Tree로 변환된다.
4. 렌더 트리를 기반으로 브라우저 화면에 Html 요소를 페인팅한다.

## 리플로우와 리페인트

자바 스크립트에 의해 DOM, CSSOM등이 수정될 경우 렌더트리를 다시 생성하여 이를 기반으로 브라우저 화면에 다시 렌더링한다. 이를 리플로우, 리페인트라 한다.

## 자바스크립트에 의한 파싱중단

파싱이 병렬적이 아닌 위에서 아래로의 직렬적인 방식으로 파싱되기 때문에 중간에 CSS 또는 Javascript를 파싱하기 위해 HTML 파싱을 중단하게 된다. CSS의 경우에는 나중에 렌더트리로 결합하기 때문에 문제가 없지만 Javascript의 경우 DOM에 접근하게 되었을 때 DOM이 완전히 생성되지 않았다면 문제가 발생할 가능성이 높다.

## Async와 Defer

1. Async의 경우 Html과 자바스크립트의 로드가 병렬적으로 동시에 진행되지만 로드가 완료되면 Html의 로드 또는 파싱을 멈추고 자바스크립트의 파싱을 시작하게 되며, 자바스크립트 파일이 여러 개일 경우 로드되는 걸 먼저 실행하기 때문에 의존성 문제가 발생할 수 있으며 기존의 문제도 발생할 수 있다.

2. Defer의 경우 로드는 동시에 진행되지만 Html의 파싱이 끝난 경우에 자바스크립트를 실행한다. 따라서 DOM 생성이 완료된 이후에 실행되기 때문에 문제가 발생하지 않는다.
